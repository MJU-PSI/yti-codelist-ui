<div *ngIf="loading">
  Loading...
  <!--TODO ajax indicator-->
</div>


<div *ngIf="!loading" class="content-box">

  <app-back-button (back)="back()"></app-back-button>

  <h1>{{code.codeValue}} - {{code.prefLabels.fi}}</h1>

  <app-status [status]="code.status"></app-status>

  <div ngbDropdown class="d-inline-block pull-right" placement="bottom-right">
    <button class="btn btn-language" id="modifyLanguageDropdown" ngbDropdownToggle>{{modifyLanguage.toUpperCase()}}</button>
    <div ngbDropdownMenu class="dropdown-menu dropdown-menu-right" aria-labelledby="modifyLanguageDropdown">
      <div *ngFor="let language of languages">
        <button class='dropdown-item' [ngClass]="{'bold': language.code === modifyLanguage}" type="button" (click)='setModifyLanguage(language.code)'>{{language.name}}</button>
      </div>
    </div>
  </div>

  <div class="row">
    <button class="tabNavi" translate>INFORMATION</button>
  </div>

  <button *ngIf='!modifyEnabled' type="button" class="btn btn-action pull-right ml-3" (click)="modify()" translate>Modify</button>
  <button *ngIf='modifyEnabled' type="button" [disabled]='storing' class="btn btn-action pull-right ml-3" (click)="save()" translate>Save</button>
  <button *ngIf='modifyEnabled' type="button" class="btn btn-link pull-right" (click)="cancel()" translate>Cancel</button>

  <label translate>Code scheme</label>
  <span>{{code.codeScheme.prefLabels[modifyLanguage]}}</span>

  <label translate>Code value</label>
  <span>{{code.codeValue}}</span>

  <div class="form-group">
    <label for="prefLabel" translate>Code name</label>
    <input id="prefLabel" class="form-control col-5" *ngIf='modifyEnabled' [(ngModel)]="code.prefLabels[modifyLanguage]">
    <span *ngIf='!modifyEnabled'>{{code.prefLabels[modifyLanguage]}}</span>
  </div>

  <div class="form-group">
    <label for="description" translate>Description</label>
    <textarea id="description" rows="3" class="form-control col-10" *ngIf='modifyEnabled' [(ngModel)]="code.descriptions[modifyLanguage]"></textarea>
    <span *ngIf='!modifyEnabled'>{{code.descriptions[modifyLanguage]}}</span>
  </div>

  <div class="form-group">
    <label for="shortName" translate>Short name</label>
    <input id="shortName" *ngIf='modifyEnabled' class="form-control col-5" [(ngModel)]="code.shortName">
    <span *ngIf='!modifyEnabled'>{{code.shortName}}</span>
  </div>

  <label translate>Validity</label>
  <span>{{code.startDate | date:'d.M.y'}} - {{code.endDate | date:'d.M.y'}}</span>

  <label translate>Last modification</label>
  <span>{{code.modified | date:'d.M.y klo hh:mm'}}</span>
</div>
