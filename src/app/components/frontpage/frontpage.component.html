<div *ngIf="loading">
  Loading...
  <!--TODO ajax indicator-->
</div>

<div *ngIf="!loading">
  <div class="row mb-5">
    <div class="col-md-3">
      <div class="input-group input-group-lg input-group-search">
        <input class="form-control" #schemeSearch id="search-box" type="text" (keyup)="searchCodeSchemes(schemeSearch.value)" placeholder="Hae koodistoa"/>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-3">
      <div class="content-box">
        <h4 class="mb-4" translate>Service classification</h4>

        <div class="classification"
             *ngFor="let serviceClassification of serviceClassifications"
             (click)="selectServiceClassification(serviceClassification.codeValue)">

          <span class="name">{{serviceClassification.prefLabels.fi}}</span>
          <span class="count">({{serviceClassification.count}})</span>
        </div>
      </div>
    </div>

    <div class="col-md-9">

      <div class="row mb-4">
        <div class="col-12">
          <div ngbDropdown class="d-inline-block">
            <button class="btn btn-dropdown" id="reg-dropdown" ngbDropdownToggle>Kaikki rekisterit</button>
            <div ngbDropdownMenu aria-labelledby="reg-dropdown">
              <button class="dropdown-item">Kaikki rekisterit</button>
            </div>
          </div>

          <div ngbDropdown class="d-inline-block">
            <button class="btn btn-dropdown" id="org-dropdown" ngbDropdownToggle>Kaikki organisaatiot</button>
            <div ngbDropdownMenu aria-labelledby="org-dropdown">
              <button class="dropdown-item">Kaikki organisaatiot</button>
            </div>
          </div>

          <div ngbDropdown class="d-inline-block">
            <button class="btn btn-dropdown" id="state-dropdown" ngbDropdownToggle>Kaikki tilat</button>
            <div ngbDropdownMenu aria-labelledby="state-dropdown">
              <button (click)="filterWithStatus('ALL')" class="dropdown-item" translate>ALL</button>
              <button (click)="filterWithStatus('SUPERSEDED')" class="dropdown-item" translate>SUPERSEDED</button>
              <button (click)="filterWithStatus('WAITING')" class="dropdown-item" translate>WAITING</button>
              <button (click)="filterWithStatus('REMOVED')" class="dropdown-item" translate>REMOVED</button>
              <button (click)="filterWithStatus('INCORRECT')" class="dropdown-item" translate>INCORRECT</button>
              <button (click)="filterWithStatus('VALID')" class="dropdown-item" translate>VALID</button>
              <button (click)="filterWithStatus('DRAFT')" class="dropdown-item" translate>DRAFT</button>
            </div>
          </div>
        </div>
      </div>

      <div class="content-box">

        <div class="row mb-4">
          <div class="col-12">
            <div *ngIf='(filteredCodeSchemes | async)?.length == 1'>
              <span class="codeschemecount">{{(filteredCodeSchemes |async)?.length}}&nbsp;</span>
              <span translate>code scheme</span>
            </div>

            <div *ngIf='(filteredCodeSchemes | async)?.length > 1'>
              <span class="codeschemecount">{{(codeSchemes |async)?.length}}&nbsp;</span>
              <span translate>code schemes</span>
            </div>

            <div *ngIf='(filteredCodeSchemes | async)?.length == 0'>
              <span translate>Search did not find any codeschemes.</span>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-12">
            <div class="code-scheme" (click)="viewCodeScheme(codeScheme)" *ngFor="let codeScheme of filteredCodeSchemes | async">
              <div class="name">{{codeScheme.prefLabels.fi}}</div>
              <div class="status" translate>{{codeScheme.status}}</div>
              <div class="organization" (click)="viewOrganization()">Testi organisaatio</div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>
